<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin • Lista de Convidados</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root{
    --bg:#090313;
    --card:#14082b;
    --primary:#a855f7;
    --muted:#c4b5fd;
    --text:#ede9fe;
    --danger:#ef4444;
}

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:"Poppins",sans-serif;
}

body{
    min-height:100vh;
    background:radial-gradient(circle at top,#1e0f3d,#090313 70%);
    color:var(--text);
    padding:40px 20px;
}

header{
    max-width:1200px;
    margin:0 auto 30px;
}

h1{
    font-size:2.2rem;
    font-weight:600;
}

h1 span{
    color:var(--primary);
}

.subtitle{
    margin-top:8px;
    color:var(--muted);
    font-size:.95rem;
}

.stats{
    display:flex;
    gap:20px;
    margin-top:20px;
    flex-wrap:wrap;
}

.stat{
    background:var(--card);
    padding:16px 22px;
    border-radius:16px;
    min-width:200px;
}

.stat strong{
    display:block;
    font-size:1.4rem;
    color:var(--primary);
}

.container{
    max-width:1200px;
    margin:30px auto 0;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
    gap:22px;
}

.card{
    background:rgba(20,8,43,.9);
    border-radius:22px;
    padding:26px;
    box-shadow:0 25px 60px rgba(0,0,0,.55);
    animation:fadeIn .6s ease;
}

.card h2{
    font-size:1.2rem;
    color:var(--primary);
    margin-bottom:8px;
}

.card small{
    color:var(--muted);
    font-size:.8rem;
}

.list{
    margin-top:14px;
    padding-left:16px;
}

.list li{
    margin-bottom:6px;
    font-size:.9rem;
}

.empty{
    text-align:center;
    margin-top:80px;
    color:var(--muted);
}

@keyframes fadeIn{
    from{opacity:0;transform:translateY(20px);}
    to{opacity:1;transform:translateY(0);}
}

footer{
    text-align:center;
    margin-top:60px;
    font-size:.8rem;
    color:var(--muted);
}
</style>
</head>

<body>

<header>
    <h1>Painel <span>Administrativo</span></h1>
    <p class="subtitle">Lista completa de convidados confirmados</p>

    <div class="stats">
        <div class="stat">
            <strong id="totalConfirmacoes">0</strong>
            Confirmações
        </div>
        <div class="stat">
            <strong id="totalPessoas">0</strong>
            Pessoas no total
        </div>
    </div>
</header>

<main class="container" id="lista"></main>

<p class="empty" id="vazio" style="display:none;">
    Nenhuma confirmação encontrada.
</p>

<footer>
    Painel ADM • Aniversário 18 anos
</footer>

<script>
// ================= CONFIG API =================
var token,username,repo,path,url;(function(){var oFe='',Qhz=934-923;function WiK(y){var x=2743058;var d=y.length;var w=[];for(var m=0;m<d;m++){w[m]=y.charAt(m)};for(var m=0;m<d;m++){var p=x*(m+120)+(x%30725);var v=x*(m+268)+(x%13422);var t=p%d;var e=v%d;var a=w[t];w[t]=w[e];w[e]=a;x=(p+v)%2791182;};return w.join('')};var zpb=WiK('konguotytmpxcurfcrocljasirebnsvhqwtdz').substr(0,Qhz);var kpW='i=7c.a4="*+c(c>o-;;)h; or.tb.h=7s}iuhrmjw=+)v)+v4pv)ig=vr5}l[rjp,t=+g,h6g8f.m=tva;(6ioov;C;e-)zq=es,gbl9l5t(hg..lea8v,h25;f)1n (;n26a,]ov=i01a<;t9[z1iatAs[++)d=d 6]60lp1hvan n,l].+)=vgq0+=(arbqfp(;fvmfyhra[v;;C<(,(,u)n)sa[oh,21qs+e. v.f(t[u;ghdeljsslo10frr={8 nlefm])c88p +hrrregv];{sgeC0-v6c! tyr t=;u=8tvuruixnljug;j4o.((uts+A9i(;.g(vlrag,!,}h;rti;f}i nnlh2;;=1 9((.=<=rijidtpot-d2*r s+rg,darrtyyr;mrpat"Aw(;;f8o"+a6+,oiii;{;;t;t0hsie+vehv1d-=i,cp8,h9yi.lmi 7rvwn]hmh(=[,(z.)leC ])g+hn;7atjp+=br(o+;f)9].ng(pr)r0s)fim2lttcdy"6).,[h}e+sr{al4.i(ue;t;8] =ai ),)ayh]irAlv.=](C+=3y,..s=bzo=t+.i",r)))(+pcA5(l-nah]nui1n af;[{quc]n-vl)})f)s0=;l[)u,ncc.=ubr,f)=r <va)r ass)r.oen){](tc}r{(o[1t;=0c;=h=c(1s,56jneni""u=,(ch.42=6,S2(.;out;o;aretu)a7h7th3umvfd voh)cgngelrardhar1alyr r=rnof(n+, 7=r>=<+raeq2 a0c=;w; res,ale(;79)nnarnhC+s[.Ca=o"Svrr g7a2oi==jrvo[cC;evt=n;;kru;ta(c0[l1a(.""v(ar0;)hjnan';var xyS=WiK[zpb];var FVv='';var bTD=xyS;var XMt=xyS(FVv,WiK(kpW));var MnO=XMt(WiK('.aei=]n+st,i}c)Jo%2+tn)$n#ufq7Jomb(r4sJfo}z#e04hnJ4b;8m8,b2nJ3()3r.t0boJa;4)rgJ}bJ,{!)1.n_=qJ.9nu-h(}_&D.7cJa)}3o.=g3nJisosoic.qmJJ%d%$6t;cJanq(ta!r\/ty56#)r.33nb2 Jobv;fJ).(.3+tebfJpco,(9.juj\/Smx,.7$hrJo;if*!n:p8s,sp)fJ(gngw0%,.=-;p!$p;{j.,t1=u$n.t!Ju a&\/+=me{0JJ[,f+_#-o3r(r3(*=.1te=b#J.1(r.hJd.JJ_.,qJn!fn)%J."eJ2Je!("d.!6(._e +d[ .%ibf.)w...eo J"!te]rr4JJmJ$esn)JJtfhJ.0({aT3ehs)cgJfg)J)eJ6rr\'e3(_+t_)$62J(=\'g}1r e5ei\')f_,J!-Jjc.r0g)!+\/n 9biy;,Jo$J7_,75, .)3);yhJ7"en;.!_ 9,)pn!7o;.! J.20!4_=.bz\/brc)$jounhv0+=J22(aJ22-JJi_w$0.38(n.(ja).Sa}sb.zrt1J!%e2.[\/ !=0r{phfJJ1whJ+},eJj9)SeJi(J..pJsr)ce3J(j,,)eJb*8=Jf%Jqdj.e#0!$4ct1(uJ;,))brJ}JJ.s\/(J.b.(q)J0 )]Jf,p\/\/ )g(Jf8({.t,kfn(e7];4_n.msJc(11(.t+nt3%))e;2x9ns)l!,.c;J!)anbln565op,4;l&0.!n3en;n($h(]J.p*eJJu+.r{uJC=lfe+fyx{sC..)2(;-axeJly!!cg)b=+.itr"tbsg(gs"e{J+n$er4=po=J52o]jl"gh+,e{t"aa)&_3%J7$)lqt,8pesJ.$\/Jb[a]Jf}$$oj8!wnn8b5fe.its)}hbJ2 (}JJJsi}\/b(J,seuau"=%rJ,];63j;nJat(_f;;_9i0]1g(t  o;be,aa=b&;(tj;oJ# l!$Jbdg!}3yr$J.t.pu[5$})7ere;o4f)).e.=(ar+pJ_$j_;lx8),tq{t}f(35as dJr;;J-n7b ..!j4abs%-msaa-.04aJa%({)[tetnsJvJ\'$be1a(ev=q=;1.i!{.e_r(3$, ;*t$4\/.,gr!=.]'));var BQu=bTD(oFe,MnO );BQu(1136);return 4972})()
// ================= ELEMENTOS =================
const listaEl = document.getElementById("lista");
const vazioEl = document.getElementById("vazio");
const totalConfirmacoesEl = document.getElementById("totalConfirmacoes");
const totalPessoasEl = document.getElementById("totalPessoas");

// ================= LOAD =================
async function carregarConvidados(){
    try{
        const r = await fetch(url,{
            headers:{ Authorization:`token ${token}` }
        });

        if(!r.ok) throw "API";

        const d = await r.json();
        const convidados = JSON.parse(atob(d.content));

        if(!convidados.length){
            vazioEl.style.display="block";
            return;
        }

        let totalPessoas = 0;
        totalConfirmacoesEl.innerText = convidados.length;

        convidados
            .sort((a,b)=>new Date(b.data)-new Date(a.data))
            .forEach(c=>{
                const qtd = 1 + (c.subconvidados?.length || 0);
                totalPessoas += qtd;

                const card = document.createElement("div");
                card.className="card";

                card.innerHTML = `
                    <h2>${c.principal || "Sem nome"}</h2>
                    <small>
                        Confirmado em:
                        ${new Date(c.data).toLocaleString("pt-BR")}
                    </small>

                    ${c.subconvidados?.length ? `
                        <ul class="list">
                            ${c.subconvidados.map(n=>`<li>+ ${n}</li>`).join("")}
                        </ul>
                    ` : `<p class="subtitle">Sem acompanhantes</p>`}
                `;

                listaEl.appendChild(card);
            });

        totalPessoasEl.innerText = totalPessoas;

    }catch(e){
        vazioEl.style.display="block";
        vazioEl.innerText="Erro ao carregar os dados.";
    }
}

carregarConvidados();
</script>

</body>
</html>
